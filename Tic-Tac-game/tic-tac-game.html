<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <link rel="stylesheet" href="./tic-tac-game.css">


</head>

<body>

    <h1>Tic Tac Toe</h1>
    <div id="status">Player X's turn</div>
    <div class="board" id="board"></div>
    <button onclick="resetGame()" class="btn1">Restart</button>

    <script>
        let board = ["", "", "", "", "", "", "", "", ""];
        let currentPlayer = "X";
        let gameActive = true;
        const statusDisplay = document.getElementById("status");
        const boardElement = document.getElementById("board");

        const winningConditions = [
            [0, 1, 2], // Row 1
            [3, 4, 5], // Row 2
            [6, 7, 8], // Row 3
            [0, 3, 6], // Column 1
            [1, 4, 7], // Column 2
            [2, 5, 8], // Column 3
            [0, 4, 8], // Diagonal 1
            [2, 4, 6]  // Diagonal 2
        ];

        function createBoard() {
            boardElement.innerHTML = "";
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement("div");
                cell.classList.add("cell");
                cell.addEventListener("click", () => cellClicked(i));
                boardElement.appendChild(cell);
            }
        }

        function cellClicked(index) {
            if (board[index] !== "" || !gameActive) return;

            board[index] = currentPlayer;
            boardElement.children[index].innerText = currentPlayer;

            const winIndex = checkWin();
            if (winIndex !== null) {
                statusDisplay.innerText = `Player ${currentPlayer} wins!`;
                gameActive = false;
                drawWinningLine(winningConditions[winIndex]);
            } else if (board.every(cell => cell !== "")) {
                statusDisplay.innerText = "It's a draw!";
                gameActive = false;
            } else {
                currentPlayer = currentPlayer === "X" ? "O" : "X";
                statusDisplay.innerText = `Player ${currentPlayer}'s turn`;
            }
        }

        function checkWin() {
            for (let i = 0; i < winningConditions.length; i++) {
                const [a, b, c] = winningConditions[i];
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    return i;
                }
            }
            return null;
        }

        function drawWinningLine(condition) {
            const line = document.createElement("div");
            line.classList.add("winning-line");

            // Row lines
            if (JSON.stringify(condition) === JSON.stringify([0, 1, 2])) {
                line.style.width = "310px";
                line.style.top = "50px";
                line.style.left = "0px";
            }
            else if (JSON.stringify(condition) === JSON.stringify([3, 4, 5])) {
                line.style.width = "310px";
                line.style.top = "155px";
                line.style.left = "0px";
            }
            else if (JSON.stringify(condition) === JSON.stringify([6, 7, 8])) {
                line.style.width = "310px";
                line.style.top = "260px";
                line.style.left = "0px";
            }
            // Column lines
            else if (JSON.stringify(condition) === JSON.stringify([0, 3, 6])) {
                line.style.height = "310px";
                line.style.width = "5px";
                line.style.top = "0px";
                line.style.left = "50px";
            }
            else if (JSON.stringify(condition) === JSON.stringify([1, 4, 7])) {
                line.style.height = "310px";
                line.style.width = "5px";
                line.style.top = "0px";
                line.style.left = "155px";
            }
            else if (JSON.stringify(condition) === JSON.stringify([2, 5, 8])) {
                line.style.height = "310px";
                line.style.width = "5px";
                line.style.top = "0px";
                line.style.left = "260px";
            }
            // Diagonal lines//
            else if (JSON.stringify(condition) === JSON.stringify([0, 4, 8])) {
                line.style.width = "440px";
                line.style.top = "155px";
                line.style.left = "-65px";
                line.style.transform = "rotate(45deg)";
            }
            else if (JSON.stringify(condition) === JSON.stringify([2, 4, 6])) {
                line.style.width = "440px";
                line.style.top = "155px";
                line.style.left = "-65px";
                line.style.transform = "rotate(-45deg)";
            }

            boardElement.appendChild(line);
        }

        function resetGame() {
            board = ["", "", "", "", "", "", "", "", ""];
            currentPlayer = "X";
            gameActive = true;
            statusDisplay.innerText = "Player X's turn";
            createBoard();
        }

        createBoard();
    </script>
</body>

</html>